(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{NBP6:function(e,t,a){e.exports={table:"table___R1FlI"}},czJx:function(e,t,a){"use strict";a.r(t);a("14J3");var n,r,l=a("BMrR"),o=(a("jCWc"),a("kPKH")),i=(a("P2fV"),a("NJEC")),c=(a("+L6B"),a("2/Rp")),s=a("p0pE"),u=a.n(s),m=a("2Taf"),d=a.n(m),f=a("vZ4D"),p=a.n(f),h=a("MhPg"),y=a.n(h),E=a("l4Ni"),g=a.n(E),v=a("ujKo"),C=a.n(v),k=a("q1tI"),R=a.n(k),w=(a("17x9"),a("7Qib")),b=a("/MKj"),T=a("ZD0w"),S=a("Kvkj"),I=a("Qyje"),O=(a("g9YV"),a("wCAj")),N=a("jehZ"),x=a.n(N),_=a("Y/ft"),F=a.n(_),P=(a("Telt"),a("Tckk")),D=(a("2qtc"),a("kLXV")),B=a("NBP6"),V=a.n(B);function A(e){var t=j();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L,M,U,Y=D["a"].confirm,K=(n=Object(T["withI18n"])(),n(r=function(e){y()(a,e);var t=A(a);function a(){var e;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.handleMenuClick=function(t,a){var n=e.props,r=n.onDeleteItem,l=n.onEditItem,o=n.i18n;"1"===a.key?l(t):"2"===a.key&&Y({title:o._("Are you sure delete this record?"),onOk:function(){r({_id:t._id,controlCode:window.localStorage.getItem("controlCode")})}})},e.initAvatar=function(e){return e.avatar?e.avatar.length>7?R.a.createElement(P["a"],{icon:"user"}):R.a.createElement(P["a"],{style:{backgroundColor:e.avatar,verticalAlign:"middle",textTransform:"capitalize"}},e.userName.slice(0,1)):R.a.createElement(P["a"],{icon:"user"})},e}return p()(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.onDeleteItem,t.onEditItem,t.i18n),n=F()(t,["onDeleteItem","onEditItem","i18n"]),r=[{title:R.a.createElement(T["Trans"],{id:"Avatar"}),dataIndex:"avatar",key:"avatar",render:function(t,a){return R.a.createElement("span",null,e.initAvatar(a))}},{title:R.a.createElement(T["Trans"],{id:"Name"}),dataIndex:"userName",key:"userName"},{title:R.a.createElement(T["Trans"],{id:"Email"}),dataIndex:"email"},{title:R.a.createElement(T["Trans"],{id:"CreateTime"}),dataIndex:"createTime",key:"createTime"},{title:R.a.createElement(T["Trans"],{id:"Status"}),dataIndex:"status",key:"status",render:function(e){return R.a.createElement("span",null,"ENABLE"===e?"Enable":"Disable")}},{title:R.a.createElement(T["Trans"],{id:"Roles"}),dataIndex:"refUserRoleCode",key:"refUserRoleCode",render:function(e){return R.a.createElement("span",null,e)}},{title:R.a.createElement(T["Trans"],{id:"Operation"}),key:"operation",render:function(t,n){return R.a.createElement(S["a"],{onMenuClick:function(t){return e.handleMenuClick(n,t)},menuOptions:[{key:"1",name:a._("Update")},{key:"2",name:a._("Delete")}]})}}];return R.a.createElement(O["a"],x()({},n,{pagination:u()({},n.pagination,{showTotal:function(e){return a._("Total {total} Items",{total:e})}}),style:{width:"100%"},className:V.a.table,bordered:!0,scroll:{x:!0},columns:r,simple:!0,rowKey:function(e){return e._id}}))}}]),a}(k["PureComponent"]))||r),q=K,z=(a("OaEy"),a("2fM7")),J=(a("y8nQ"),a("Vl3Y")),Q=(a("iQDF"),a("+eQT")),H=(a("5NDa"),a("5rEg")),Z=a("wd/R"),G=a.n(Z);function W(e){var t=X();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $,ee,te,ae=H["a"].Search,ne=Q["a"].RangePicker,re={xs:24,sm:12,style:{marginBottom:16}},le=u()({},re,{xl:96}),oe=(L=Object(T["withI18n"])(),M=J["a"].create(),L(U=M(U=function(e){y()(a,e);var t=W(a);function a(){var e;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.handleFields=function(e){var t=e.createTime;return t.length&&(e.createTime=[G()(t[0]).format("YYYY-MM-DD hh:mm:ss"),G()(t[1]).format("YYYY-MM-DD hh:mm:ss")]),e},e.handleSubmit=function(){var t=e.props,a=t.onFilterChange,n=t.form,r=n.getFieldsValue,l=r();l=e.handleFields(l),a(l)},e.handleReset=function(){var t=e.props.form,a=t.getFieldsValue,n=t.setFieldsValue,r=a();for(var l in r)({}).hasOwnProperty.call(r,l)&&(r[l]instanceof Array?r[l]=[]:r[l]=void 0);n(r),e.handleSubmit()},e.handleChange=function(t,a){var n=e.props,r=n.form,l=n.onFilterChange,o=r.getFieldsValue,i=o();i[t]=a,i=e.handleFields(i),l(i)},e.handleChangeRoles=function(e,t){},e}return p()(a,[{key:"componentDidUpdate",value:function(e,t){0===Object.keys(e.filter).length&&this.handleReset()}},{key:"render",value:function(){var e=this.props,t=e.onAdd,a=e.filter,n=e.form,r=e.i18n,i=e.roleSelectList,s=n.getFieldDecorator,u=a.userName,m=a.refUserRoleCode,d=[];return a.createTime&&a.createTime[0]&&(d[0]=G()(a.createTime[0])),a.createTime&&a.createTime[1]&&(d[1]=G()(a.createTime[1])),R.a.createElement(l["a"],{gutter:24},R.a.createElement(o["a"],x()({},re,{xl:{span:4},md:{span:8}}),s("userName",{initialValue:u||null})(R.a.createElement(ae,{placeholder:r._("Search Name"),onSearch:this.handleSubmit}))),R.a.createElement(o["a"],x()({},re,{xl:{span:4},md:{span:8}}),s("refUserRoleCode",{initialValue:m})(R.a.createElement(z["a"],{style:{width:200},onChange:this.handleChangeRoles,placeholder:r._("Roles"),allowClear:!0},i.map(function(e){return R.a.createElement(z["a"].Option,{key:e.roleName},e.roleName)})))),R.a.createElement(o["a"],x()({},re,{xl:{span:6},md:{span:8},sm:{span:12},id:"createTimeRangePicker"}),R.a.createElement(S["c"],{label:r._("CreateTime")},s("createTime",{initialValue:d})(R.a.createElement(ne,{style:{width:"100%"},onChange:this.handleChange.bind(this,"createTime"),getCalendarContainer:function(){return document.getElementById("createTimeRangePicker")}})))),R.a.createElement(o["a"],x()({},le,{xl:{span:10},md:{span:24},sm:{span:24}}),R.a.createElement(l["a"],{type:"flex",align:"middle",justify:"space-between"},R.a.createElement("div",null,R.a.createElement(c["a"],{type:"primary",className:"margin-right",onClick:this.handleSubmit},R.a.createElement(T["Trans"],{id:"Search"})),R.a.createElement(c["a"],{onClick:this.handleReset},R.a.createElement(T["Trans"],{id:"Reset"}))),R.a.createElement(c["a"],{type:"ghost",onClick:t},R.a.createElement(T["Trans"],{id:"Create"})))))}}]),a}(k["Component"]))||U)||U),ie=oe,ce=(a("7Kak"),a("9yH6")),se=a("J2m7"),ue=a.n(se),me=a("aCH8"),de=a.n(me);function fe(e){var t=pe();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var he,ye,Ee,ge=z["a"].Option,ve=J["a"].Item,Ce={labelCol:{span:6},wrapperCol:{span:14}},ke=($=Object(T["withI18n"])(),ee=J["a"].create(),$(te=ee(te=function(e){y()(a,e);var t=fe(a);function a(){var e;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.state={roleSelectPermission:[]},e.handleOk=function(){var t=e.props,a=t.item,n=void 0===a?{}:a,r=t.onOk,l=t.form,o=t.modalType,i=l.validateFields,c=l.getFieldsValue;i(function(t){if(!t){var a=u()({},c(),{_id:n._id,controlCode:window.localStorage.getItem("controlCode")});e.state.roleSelectPermission.length&&(a.visit=e.state.roleSelectPermission),"create"===o&&(a.avatar=Object(w["e"])()),a.password&&(a.password=de()(a.password)),r(a)}})},e.selectRoles=function(t){var a=e.props.roleSelectList,n=ue()(a,["roleName",t]);e.setState({roleSelectPermission:n.permission})},e}return p()(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=void 0===t?{}:t,n=(e.onOk,e.form),r=e.i18n,l=e.roleSelectList,o=F()(e,["item","onOk","form","i18n","roleSelectList"]),i=n.getFieldDecorator;return R.a.createElement(D["a"],x()({},o,{onOk:this.handleOk}),R.a.createElement(J["a"],{layout:"horizontal"},R.a.createElement(ve,x()({label:r._("Name"),hasFeedback:!0},Ce),i("userName",{initialValue:a.userName?a.userName:"",rules:[{required:!0}]})(R.a.createElement(H["a"],null))),R.a.createElement(ve,x()({label:r._("Password"),hasFeedback:!0},Ce),i("password",{initialValue:a.password||""})(R.a.createElement(H["a"].Password,{password:"true"}))),R.a.createElement(ve,x()({label:r._("Email"),hasFeedback:!0},Ce),i("email",{initialValue:a.email||"",rules:[{required:!0}]})(R.a.createElement(H["a"],null))),R.a.createElement(ve,x()({label:r._("Roles"),hasFeedback:!0},Ce),i("refUserRoleCode",{initialValue:a.refUserRoleCode,rules:[{required:!0}]})(R.a.createElement(z["a"],{onChange:this.selectRoles},l.map(function(e){return R.a.createElement(ge,{key:e.roleName},e.roleName)})))),R.a.createElement(ve,x()({label:r._("Status"),hasFeedback:!0},Ce),i("status",{initialValue:a.status||"ENABLE",rules:[{required:!0}]})(R.a.createElement(ce["a"].Group,{style:{width:150}},R.a.createElement(ce["a"],{value:"ENABLE"},"Enable"),R.a.createElement(ce["a"],{value:"CLOSE"},"Disable"))))))}}]),a}(k["PureComponent"]))||te)||te),Re=ke;function we(e){var t=be();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}function be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Te=(he=Object(T["withI18n"])(),ye=Object(b["c"])(function(e){var t=e.user,a=e.app,n=e.loading;return{user:t,app:a,loading:n}}),he(Ee=ye(Ee=function(e){y()(a,e);var t=we(a);function a(){return d()(this,a),t.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.dispatch,n=e.user,r=e.loading,s=e.i18n,m=t.query,d=t.pathname,f=n.list,p=n.pagination,h=n.currentItem,y=n.modalVisible,E=n.modalType,g=n.selectedRowKeys,v=n.roleSelectList,C=function(e){w["k"].push({pathname:d,search:Object(I["stringify"])(u()({},m,e),{arrayFormat:"repeat"})})},k={modalType:E,roleSelectList:v,item:"create"===E?{}:h,visible:y,maskClosable:!1,confirmLoading:r.effects["user/".concat(E)],title:"".concat("create"===E?s._("Create User"):s._("Update User")),centered:!0,onOk:function(e){a({type:"user/".concat(E),payload:e}).then(function(){C()})},onCancel:function(){a({type:"user/hideModal"})}},b={dataSource:f,loading:r.effects["user/query"],pagination:p,onChange:function(e){C({page:e.current,pageSize:e.pageSize})},onDeleteItem:function(e){a({type:"user/delete",payload:e}).then(function(){C({page:1===f.length&&p.current>1?p.current-1:p.current})})},onEditItem:function(e){a({type:"user/showModal",payload:{modalType:"update",currentItem:e}})},rowSelection:{selectedRowKeys:g,onChange:function(e){a({type:"user/updateState",payload:{selectedRowKeys:e}})}}},T={roleSelectList:v,filter:u()({},m),onFilterChange:function(e){C(u()({},e,{page:1}))},onAdd:function(){a({type:"user/showModal",payload:{modalType:"create"}})}},O=function(){a({type:"user/multiDelete",payload:{_id:g,controlCode:window.localStorage.getItem("controlCode")}}).then(function(){C({page:f.length===g.length&&p.current>1?p.current-1:p.current})})};return R.a.createElement(S["f"],{inner:!0},R.a.createElement(ie,T),g.length>0&&R.a.createElement(l["a"],{style:{marginBottom:24,textAlign:"right",fontSize:13}},R.a.createElement(o["a"],null,"Selected ".concat(g.length," items "),R.a.createElement(i["a"],{title:"Are you sure delete these items?",placement:"left",onConfirm:O},R.a.createElement(c["a"],{type:"primary",style:{marginLeft:8}},"Remove")))),R.a.createElement(q,b),y&&R.a.createElement(Re,k))}}]),a}(k["PureComponent"]))||Ee)||Ee);t["default"]=Te}}]);